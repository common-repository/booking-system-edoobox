{"version":3,"file":"admin.js","sources":["../admin/main.ts"],"sourcesContent":["jQuery(document).ready(function() {\n    let button = document.getElementById('edo-ajax-output-btn')\n    if (button) {\n        button.addEventListener('click', edoAjaxCheckPosts)\n    }\n\n    let buttonCheckApi = document.getElementById('edo-ajax-checkapicred-btn')\n    if (buttonCheckApi) {\n        buttonCheckApi.addEventListener('click', checkAPICredentials)\n    }\n\n    let buttonFlushCache = document.getElementById('edbs_flush_cache_btn');\n    if (buttonFlushCache) {\n        buttonFlushCache.addEventListener('click', flushCache);\n    }\n\n    function edoAjaxCheckPosts() {\n        let data = {\n            'action': 'edo_ajax_action',\n        };\n        // We can also pass the url value separately from ajaxurl for front end AJAX implementations\n        jQuery.post(ajax_object.ajax_url, data, function (response) {\n            let the_id = 'edo-ajax-output'\n            let element = document.getElementById(the_id)\n\n            button.classList.add('edbs-green')\n            location.reload();\n        });\n    }\n\n    function checkAPICredentials() {\n        let api1 = document.getElementById('public_key');\n        let api2 = document.getElementById('secret_key');\n\n        console.log(api1.value, api2.value)\n\n        // We can also pass the url value separately from ajaxurl for front end AJAX implementations\n        jQuery.post(ajax_object.ajax_url, {\n            action: 'validate-api-credentials',\n            api1: api1.value,\n            api2: api2.value\n        })\n            .done(function(response){\n                let element = document.querySelector('#edo-ajax-checkapicred-btn span')\n                let button_wiggle = document.getElementById('edo-ajax-checkapicred-btn')\n                element.classList.remove('dashicons-privacy', 'dashicons-yes-alt','dashicons-dismiss')\n                button_wiggle.classList.remove('edbs-wiggle')\n\n                if ( ! response.data.success) {\n                    element.classList.add('dashicons-dismiss')\n                    element.style.color = 'red';\n                    api1.style.border = '2px solid red';\n                    api2.style.border = '2px solid red';\n                    return;\n                }\n\n                element.classList.add('dashicons-yes-alt')\n                element.style.color = 'green';\n                api1.style.border = '2px solid green';\n                api2.style.border = '2px solid green';\n            });\n    }\n\n    function flushCache(event) {\n        event.preventDefault();\n        let overlayLoader = document.getElementById('edbs_overlay');\n        let cachingMinutes = document.getElementById('edoobox_cache_time_in_s');\n        let nonce = document.getElementById('caching_meta_box_nonce');\n        overlayLoader.classList.remove('hidden');\n\n        setTimeout(function () {\n            let data = {\n                action: 'edo_ajax_flushcache_action',\n                edoobox_cache_time_in_s: cachingMinutes?.value || 0,\n                caching_meta_box_nonce: nonce?.value\n            };\n\n            // We can also pass the url value separately from ajaxurl for front end AJAX implementations\n            jQuery.post(ajax_object.ajax_url, data)\n                .done(function (response) {\n                    setTimeout(() => {\n                        overlayLoader.classList.remove('hidden');\n                        overlayLoader.classList.add('hidden');\n                    }, 200);\n                })\n                .fail(function (xhr, status, error) {\n                    // error handling\n                    console.log(error);\n                });\n        }, 0)\n    }\n\n});"],"names":["button","edoAjaxCheckPosts","buttonCheckApi","checkAPICredentials","buttonFlushCache","flushCache","data","response","the_id","api1","api2","element","button_wiggle","event","overlayLoader","cachingMinutes","nonce","xhr","status","error"],"mappings":"AAAA,OAAO,QAAQ,EAAE,MAAM,WAAW;AAC1B,MAAAA,IAAS,SAAS,eAAe,qBAAqB;AAC1D,EAAIA,KACOA,EAAA,iBAAiB,SAASC,CAAiB;AAGlD,MAAAC,IAAiB,SAAS,eAAe,2BAA2B;AACxE,EAAIA,KACeA,EAAA,iBAAiB,SAASC,CAAmB;AAG5D,MAAAC,IAAmB,SAAS,eAAe,sBAAsB;AACrE,EAAIA,KACiBA,EAAA,iBAAiB,SAASC,CAAU;AAGzD,WAASJ,IAAoB;AACzB,QAAIK,IAAO;AAAA,MACP,QAAU;AAAA,IAAA;AAGd,WAAO,KAAK,YAAY,UAAUA,GAAM,SAAUC,GAAU;AACxD,UAAIC,IAAS;AACC,eAAS,eAAeA,CAAM,GAErCR,EAAA,UAAU,IAAI,YAAY,GACjC,SAAS,OAAO;AAAA,IAAA,CACnB;AAAA,EACL;AAEA,WAASG,IAAsB;AACvB,QAAAM,IAAO,SAAS,eAAe,YAAY,GAC3CC,IAAO,SAAS,eAAe,YAAY;AAE/C,YAAQ,IAAID,EAAK,OAAOC,EAAK,KAAK,GAG3B,OAAA,KAAK,YAAY,UAAU;AAAA,MAC9B,QAAQ;AAAA,MACR,MAAMD,EAAK;AAAA,MACX,MAAMC,EAAK;AAAA,IAAA,CACd,EACI,KAAK,SAASH,GAAS;AAChB,UAAAI,IAAU,SAAS,cAAc,iCAAiC,GAClEC,IAAgB,SAAS,eAAe,2BAA2B;AAIlE,UAHLD,EAAQ,UAAU,OAAO,qBAAqB,qBAAoB,mBAAmB,GACvEC,EAAA,UAAU,OAAO,aAAa,GAEvC,CAAEL,EAAS,KAAK,SAAS;AAClB,QAAAI,EAAA,UAAU,IAAI,mBAAmB,GACzCA,EAAQ,MAAM,QAAQ,OACtBF,EAAK,MAAM,SAAS,iBACpBC,EAAK,MAAM,SAAS;AACpB;AAAA,MACJ;AAEQ,MAAAC,EAAA,UAAU,IAAI,mBAAmB,GACzCA,EAAQ,MAAM,QAAQ,SACtBF,EAAK,MAAM,SAAS,mBACpBC,EAAK,MAAM,SAAS;AAAA,IAAA,CACvB;AAAA,EACT;AAEA,WAASL,EAAWQ,GAAO;AACvB,IAAAA,EAAM,eAAe;AACjB,QAAAC,IAAgB,SAAS,eAAe,cAAc,GACtDC,IAAiB,SAAS,eAAe,sBAAsB,GAC/DC,IAAQ,SAAS,eAAe,wBAAwB;AAC9C,IAAAF,EAAA,UAAU,OAAO,QAAQ,GAEvC,WAAW,WAAY;AACnB,UAAIR,IAAO;AAAA,QACP,QAAQ;AAAA,QACR,uBAAsBS,KAAA,gBAAAA,EAAgB,UAAS;AAAA,QAC/C,wBAAwBC,KAAA,gBAAAA,EAAO;AAAA,MAAA;AAInC,aAAO,KAAK,YAAY,UAAUV,CAAI,EACjC,KAAK,SAAUC,GAAU;AACtB,mBAAW,MAAM;AACC,UAAAO,EAAA,UAAU,OAAO,QAAQ,GACzBA,EAAA,UAAU,IAAI,QAAQ;AAAA,WACrC,GAAG;AAAA,MACT,CAAA,EACA,KAAK,SAAUG,GAAKC,GAAQC,GAAO;AAEhC,gBAAQ,IAAIA,CAAK;AAAA,MAAA,CACpB;AAAA,OACN,CAAC;AAAA,EACR;AAEJ,CAAC;"}